@{
    ViewBag.Title = "Listar por Categoria";
}

<h2>Listar Livros Por Categoria</h2>

@{
    var Message = "";
    if (IsPost)
    {
        @*<p>This is from the postback</p>*@
        
        using (Html.BeginForm())
        {
            @Html.AntiForgeryToken();
            <div class="editor-field">
            @Html.DropDownList("categoriaSelecionada",(SelectList)ViewBag.categoria);
            </div>
            <input type="submit" value="ok"/>
        } 
    
    
        List<IDEIBiblio.Models.Livro> test = new List<IDEIBiblio.Models.Livro>();
        test = ViewBag.listaLivrosCategoria;
        <h2>Categoria: </h2>
        <table>
        @foreach (IDEIBiblio.Models.Livro liv in test)
        {
            @Html.Partial("_ProdutoPartial", liv)
        }
        </table>
    }
    else
    {
        @*<p>This is without postback</p>*@
        using (Html.BeginForm())
        {
            @Html.AntiForgeryToken();
            <div class="editor-field">
            @Html.DropDownList("categoriaSelecionada",(SelectList)ViewBag.categoria);
            </div>
            <input type="submit" value="ok"/>
        } 
    }
}

